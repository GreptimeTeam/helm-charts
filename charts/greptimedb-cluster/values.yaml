image:
  # -- The image registry
  registry: docker.io
  # -- The image repository
  repository: greptime/greptimedb
  # -- The image tag
  tag: "v0.14.3"
  # -- The image pull secrets
  pullSecrets: []

# -- additional labels to add to all resources
additionalLabels: {}

initializer:
  # -- Initializer image registry
  registry: docker.io
  # -- Initializer image repository
  repository: greptime/greptimedb-initializer
  # -- Initializer image tag
  tag: v0.2.2

base:
  # -- The pod template for base
  podTemplate:
    # -- The base spec of main container
    main:
      resources:
        # -- The requested resources for the container
        requests: {}
        #  cpu: 500m
        #  memory: 512Mi

        # -- The resources limits for the container
        limits: {}
        #  cpu: "1"
        #  memory: "1Gi"

      # -- The environment variables for the container
      env: []

      # -- The command to be executed in the container
      command: []

      # -- The arguments to be passed to the command
      args: []

      # -- The config for startup probe of the main container
      startupProbe: {}
#        httpGet:
#          # -- Path to access on the HTTP server
#          path: /health
#          # -- Name or number of the port to access on the container
#          port: 4000
#          # -- The initial delay seconds for the readiness probe.
#          initialDelaySeconds: 5
#          # -- The timeout seconds for the readiness probe
#          timeoutSeconds: 1
#          # -- The period seconds for the readiness probe
#          periodSeconds: 10
#          # -- The success threshold for the readiness probe
#          successThreshold: 1
#          # -- The failure threshold for the readiness probe
#          failureThreshold: 3

      # -- The config for readiness probe of the main container
      readinessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The config for liveness probe of the main container
      livenessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The configurations for security context of main container.
      securityContext: {}

    # -- The annotations to be created to the pod.
    annotations: {}
    # -- The labels to be created to the pod.
    labels: {}
    # -- The pod node selector
    nodeSelector: {}
    # -- The pod tolerations
    tolerations: []
    # -- The pod affinity
    affinity: {}
    # -- The global service account
    serviceAccountName: ""
    # -- The configurations for pod security context.
    securityContext: {}
    # -- The termination grace period seconds
    terminationGracePeriodSeconds: 30

# -- Frontend configure
frontend:
  enabled: true

  # -- Frontend replicas
  replicas: 1

  # -- Extra toml file of frontend.
  configFile: ""

  # -- Extra raw toml config data of frontend. Skip if the `configFile` is used.
  configData: ""

  # -- The pod template for frontend
  podTemplate:
    # -- The spec of main container
    main:
      # -- The frontend image.
      image: ""

      resources:
        # -- The requested resources for the container
        requests: {}
        #  cpu: "1"
        #  memory: "2Gi"

        # -- The resources limits for the container
        limits: {}
        #  cpu: "1"
        #  memory: "2Gi"

      # -- The environment variables for the container
      env: []

      # -- The command to be executed in the container
      command: []

      # -- The arguments to be passed to the command
      args: []

      # -- The pod volumeMounts
      volumeMounts: []

      # -- The config for startup probe of the main container
      startupProbe: {}
#        httpGet:
#          # -- Path to access on the HTTP server
#          path: /health
#          # -- Name or number of the port to access on the container
#          port: 4000
#          # -- The initial delay seconds for the readiness probe.
#          initialDelaySeconds: 5
#          # -- The timeout seconds for the readiness probe
#          timeoutSeconds: 1
#          # -- The period seconds for the readiness probe
#          periodSeconds: 10
#          # -- The success threshold for the readiness probe
#          successThreshold: 1
#          # -- The failure threshold for the readiness probe
#          failureThreshold: 3

      # -- The config for readiness probe of the main container
      readinessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The config for liveness probe of the main container
      livenessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The configurations for frontend container.
      securityContext: {}

    # -- The annotations to be created to the pod.
    annotations: {}
    # -- The labels to be created to the pod.
    labels: {}
    # -- The pod node selector
    nodeSelector: {}
    # -- The pod tolerations
    tolerations: []
    # -- The pod affinity
    affinity: {}
    # -- The pod volumes
    volumes: []

    serviceAccount:
      # -- Create a service account
      create: false
      # -- The annotations for frontend serviceaccount
      annotations: {}

    # -- The configurations for frontend security context.
    securityContext: {}

    # -- The termination grace period seconds
    # terminationGracePeriodSeconds: 30

  # -- Frontend service
  service: {}

  # -- Frontend tls configure
  tls: {}
#    secretName: greptimedb-frontend-tls

  # -- Logging configuration for frontend, if not set, it will use the global logging configuration.
  logging: {}
#    # -- The log level for greptimedb, only support "debug", "info", "warn", "debug"
#    level: "info"
#
#    # -- The log format for greptimedb, only support "json" and "text"
#    format: "text"
#
#    # -- The logs directory for greptimedb
#    logsDir: "/data/greptimedb/logs"
#
#    # -- Whether to log to stdout only
#    onlyLogToStdout: false
#
#    # -- indicates whether to persist the log with the datanode data storage. It **ONLY** works for the datanode component.
#    persistentWithData: false
#
#    # -- The log filters, use the syntax of `target[span\{field=value\}]=level` to filter the logs.
#    filters: []

# -- Meta configure
meta:
  # -- Meta replicas
  replicas: 1

  # -- Extra toml file of meta.
  configFile: ""

  # -- Extra raw toml config data of meta. Skip if the `configFile` is used.
  configData: ""

  # -- The pod template for meta
  podTemplate:
    # -- The spec of main container
    main:
      # -- The meta image.
      image: ""

      resources:
        # -- The requested resources for the container
        requests: {}
        #  cpu: "1"
        #  memory: "2Gi"

        # -- The resources limits for the container
        limits: {}
        #  cpu: "1"
        #  memory: "2Gi"

      # -- The environment variables for the container
      env: []

      # -- The command to be executed in the container
      command: []

      # -- The arguments to be passed to the command
      args: []

      # -- The pod volumeMounts
      volumeMounts: []

      # -- The config for startup probe of the main container
      startupProbe: {}
#        httpGet:
#          # -- Path to access on the HTTP server
#          path: /health
#          # -- Name or number of the port to access on the container
#          port: 4000
#          # -- The initial delay seconds for the readiness probe.
#          initialDelaySeconds: 5
#          # -- The timeout seconds for the readiness probe
#          timeoutSeconds: 1
#          # -- The period seconds for the readiness probe
#          periodSeconds: 10
#          # -- The success threshold for the readiness probe
#          successThreshold: 1
#          # -- The failure threshold for the readiness probe
#          failureThreshold: 3

      # -- The config for readiness probe of the main container
      readinessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The config for liveness probe of the main container
      livenessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The configurations for meta security context.
      securityContext: {}

    # -- The annotations to be created to the pod.
    annotations: {}
    # -- The labels to be created to the pod.
    labels: {}
    # -- The pod node selector
    nodeSelector: {}
    # -- The pod tolerations
    tolerations: []
    # -- The pod affinity
    affinity: {}
    # -- The pod volumes
    volumes: []

    serviceAccount:
      # -- Create a service account
      create: false
      # -- The annotations for meta serviceaccount
      annotations: {}

    # -- The configurations for meta security context.
    securityContext: {}

    # -- The termination grace period seconds
    # terminationGracePeriodSeconds: 30

  # -- Meta etcd endpoints
  etcdEndpoints: "etcd.etcd-cluster.svc.cluster.local:2379"

  # -- Meta will store data with this key prefix
  storeKeyPrefix: ""

  # -- Whether to enable region failover
  enableRegionFailover: false

  # -- Logging configuration for meta, if not set, it will use the global logging configuration.
  logging: {}
#    # -- The log level for greptimedb, only support "debug", "info", "warn", "debug"
#    level: "info"
#
#    # -- The log format for greptimedb, only support "json" and "text"
#    format: "text"
#
#    # -- The logs directory for greptimedb
#    logsDir: "/data/greptimedb/logs"
#
#    # -- Whether to log to stdout only
#    onlyLogToStdout: false
#
#    # -- indicates whether to persist the log with the datanode data storage. It **ONLY** works for the datanode component.
#    persistentWithData: false
#
#    # -- The log filters, use the syntax of `target[span\{field=value\}]=level` to filter the logs.
#    filters: []

# -- Datanode configure
datanode:
  # -- Datanode replicas
  replicas: 1

  # -- Extra toml file of datanode.
  configFile: ""

  # -- Extra raw toml config data of datanode. Skip if the `configFile` is used.
  configData: ""

  # -- The pod template for datanode
  podTemplate:
    # -- The spec of main container
    main:
      # -- The datanode image.
      image: ""

      resources:
        # -- The requested resources for the container
        requests: {}
        #  cpu: "1"
        #  memory: "2Gi"

        # -- The resources limits for the container
        limits: {}
        #  cpu: "1"
        #  memory: "2Gi"

      # -- The environment variables for the container
      env: []

      # -- The command to be executed in the container
      command: []

      # -- The arguments to be passed to the command
      args: []

      # -- The pod volumeMounts
      volumeMounts: []
      # -- The config for startup probe of the main container
      startupProbe: {}
#        httpGet:
#          # -- Path to access on the HTTP server
#          path: /health
#          # -- Name or number of the port to access on the container
#          port: 4000
#          # -- The initial delay seconds for the readiness probe.
#          initialDelaySeconds: 5
#          # -- The timeout seconds for the readiness probe
#          timeoutSeconds: 1
#          # -- The period seconds for the readiness probe
#          periodSeconds: 10
#          # -- The success threshold for the readiness probe
#          successThreshold: 1
#          # -- The failure threshold for the readiness probe
#          failureThreshold: 3

      # -- The config for readiness probe of the main container
      readinessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The config for liveness probe of the main container
      livenessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The configurations for datanode security context.
      securityContext: {}

    # -- The annotations to be created to the pod.
    annotations: {}
    # -- The labels to be created to the pod.
    labels: {}
    # -- The pod node selector
    nodeSelector: {}
    # -- The pod tolerations
    tolerations: []
    # -- The pod affinity
    affinity: {}
    # -- The pod volumes
    volumes: []

    serviceAccount:
      # -- Create a service account
      create: false
      # -- The annotations for datanode serviceaccount
      annotations: {}

    # -- The configurations for datanode security context.
    securityContext: {}

    # -- The termination grace period seconds
    # terminationGracePeriodSeconds: 30

  storage:
    # -- Storage class for datanode persistent volume
    storageClassName: null
    # -- Storage size for datanode persistent volume
    storageSize: 20Gi
    # -- Storage retain policy for datanode persistent volume
    storageRetainPolicy: Retain
    # -- The dataHome directory, default is "/data/greptimedb/"
    dataHome: "/data/greptimedb"
    # -- The data directory of the storage, default is "/data/greptimedb"
    mountPath: "/data/greptimedb"
    # -- The labels for the PVC that will be created
    labels: {}
    # -- The annotations for the PVC that will be created
    annotations: {}

  # -- Logging configuration for datanode, if not set, it will use the global logging configuration.
  logging: {}
#    # -- The log level for greptimedb, only support "debug", "info", "warn", "debug"
#    level: "info"
#
#    # -- The log format for greptimedb, only support "json" and "text"
#    format: "text"
#
#    # -- The logs directory for greptimedb
#    logsDir: "/data/greptimedb/logs"
#
#    # -- Whether to log to stdout only
#    onlyLogToStdout: false
#
#    # -- indicates whether to persist the log with the datanode data storage. It **ONLY** works for the datanode component.
#    persistentWithData: false
#
#    # -- The log filters, use the syntax of `target[span\{field=value\}]=level` to filter the logs.
#    filters: []

# -- Flownode configure.
flownode:
  # -- Enable flownode
  enabled: true

  # -- Flownode replicas
  replicas: 1

  # -- Extra toml file of flownode.
  configFile: ""

  # -- Extra raw toml config data of flownode. Skip if the `configFile` is used.
  configData: ""

  # -- Logging configuration for flownode, if not set, it will use the global logging configuration.
  logging: {}
#      # -- The log level for greptimedb, only support "debug", "info", "warn", "debug"
#      level: "info"
#
#      # -- The log format for greptimedb, only support "json" and "text"
#      format: "text"
#
#      # -- The logs directory for greptimedb
#      logsDir: "/data/greptimedb/logs"
#
#      # -- Whether to log to stdout only
#      onlyLogToStdout: false
#
#      # -- indicates whether to persist the log with the datanode data storage. It **ONLY** works for the datanode component.
#      persistentWithData: false
#
#      # -- The log filters, use the syntax of `target[span\{field=value\}]=level` to filter the logs.
#      filters: []

  # -- The pod template for frontend
  podTemplate:
    # -- The spec of main container
    main:
      # -- The flownode image.
      image: ""

      resources:
        # -- The requested resources for the container
        requests: {}
        #  cpu: "1"
        #  memory: "2Gi"

        # -- The resources limits for the container
        limits: {}
        #  cpu: "1"
        #  memory: "2Gi"

      # -- The environment variables for the container
      env: []

      # -- The command to be executed in the container
      command: []

      # -- The arguments to be passed to the command
      args: []

      # -- The pod volumeMounts
      volumeMounts: []

      # -- The config for startup probe of the main container
      startupProbe: {}
#        httpGet:
#          # -- Path to access on the HTTP server
#          path: /health
#          # -- Name or number of the port to access on the container
#          port: 4000
#          # -- The initial delay seconds for the readiness probe.
#          initialDelaySeconds: 5
#          # -- The timeout seconds for the readiness probe
#          timeoutSeconds: 1
#          # -- The period seconds for the readiness probe
#          periodSeconds: 10
#          # -- The success threshold for the readiness probe
#          successThreshold: 1
#          # -- The failure threshold for the readiness probe
#          failureThreshold: 3

      # -- The config for readiness probe of the main container
      readinessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The config for liveness probe of the main container
      livenessProbe: {}
#        httpGet:
#        # -- Path to access on the HTTP server
#          path: /health
#        # -- Name or number of the port to access on the container
#          port: 4000
#        # -- The initial delay seconds for the readiness probe.
#        initialDelaySeconds: 5
#        # -- The timeout seconds for the readiness probe
#        timeoutSeconds: 1
#        # -- The period seconds for the readiness probe
#        periodSeconds: 10
#        # -- The success threshold for the readiness probe
#        successThreshold: 1
#        # -- The failure threshold for the readiness probe
#        failureThreshold: 3

      # -- The configurations for flownode security context.
      securityContext: {}

    # -- The annotations to be created to the pod.
    annotations: {}
    # -- The labels to be created to the pod.
    labels: {}
    # -- The pod node selector
    nodeSelector: {}
    # -- The pod tolerations
    tolerations: []
    # -- The pod affinity
    affinity: {}
    # -- The pod volumes
    volumes: []

    serviceAccount:
      # -- Create a service account
      create: false
      # -- The annotations for flownode serviceaccount
      annotations: {}

    # -- The configurations for flownode security context.
    securityContext: {}

    # -- The termination grace period seconds
    # terminationGracePeriodSeconds: 30

# -- Frontend instance group configure
frontends: []
  # -- Custom frontend name
#  - name: read
#    replicas: 1
#
#    # -- Extra raw toml config data of frontend.
#    config: |
#      default_timezone = "UTC"
#
#      [http]
#      timeout = "10s"

    # -- The pod template for frontend
#    template:
#      main:
#        resources:
#          requests:
#            cpu: 2000m
#            memory: 2048Mi
#          limits:
#            cpu: 2000m
#            memory: 2048Mi

  # -- Custom frontend name
#  - name: write
#    replicas: 1
#
#    # -- Extra raw toml config data of frontend.
#    config: |
#      default_timezone = "UTC"
#
#      [http]
#      timeout = "10s"

    # -- The pod template for frontend
#    template:
#      main:
#        resources:
#          requests:
#            cpu: 2000m
#            memory: 2048Mi
#          limits:
#            cpu: 2000m
#            memory: 2048Mi

# -- GreptimeDB http service port
httpServicePort: 4000
# -- GreptimeDB grpc service port
grpcServicePort: 4001
# -- GreptimeDB mysql service port
mysqlServicePort: 4002
# -- GreptimeDB postgres service port
postgresServicePort: 4003

# -- Configure to prometheus PodMonitor
prometheusMonitor:
  # -- Create PodMonitor resource for scraping metrics using PrometheusOperator
  enabled: false
  # -- Interval at which metrics should be scraped
  interval: "30s"
  # -- Add labels to the PodMonitor
  labels:
    release: prometheus

# -- Configure to PrometheusRule
prometheusRule:
  # -- If enabled, create PrometheusRule resource
  enabled: false
  # -- Additional annotations for the rules PrometheusRule resource
  annotations: {}
  # -- Additional labels for the rules PrometheusRule resource
  labels: {}
  # -- The namespace of prometheus rules
  namespace: ""
  # -- The prometheus rules
  rules: []
  # # These are examples rules, please adapt them to your needs
#    - alert: HighGRPCRequestLatency
#      expr: histogram_quantile(0.99, sum by(pod, le) (rate(greptime_servers_grpc_requests_elapsed_bucket[1m]))) > 1
#      for: 5s
#      labels:
#        severity: warning
#      annotations:
#        description: "The 99th percentile of gRPC request latency is above the threshold for pod: {{ $labels.pod }}"
#        summary: "High gRPC request latency for greptimedb pods"
#    - alert: HighHTTPRequestLatency
#      expr: histogram_quantile(0.99, sum by(pod, le) (rate(greptime_servers_http_requests_elapsed_bucket[1m]))) > 1
#      for: 5s
#      labels:
#        severity: warning
#      annotations:
#        description: "The 99th percentile of HTTP request latency is above the threshold for pod: {{ $labels.pod }}"
#        summary: "High HTTP request latency for greptimedb pods"
#    - alert: HighMySQLRequestLatency
#      expr: histogram_quantile(0.99, sum by(pod, le) (rate(greptime_servers_mysql_query_elapsed_bucket[1m]))) > 1
#      for: 5s
#      labels:
#        severity: warning
#      annotations:
#        description: "The 99th percentile of MySQL request latency is above the threshold for pod: {{ $labels.pod }}"
#        summary: "High MySQL request latency for greptimedb pods"
#    - alert: HighPostgreSQLRequestLatency
#      expr: histogram_quantile(0.99, sum by(pod, le) (rate(greptime_servers_postgres_query_elapsed_bucket[1m]))) > 1
#      for: 5s
#      labels:
#        severity: warning
#      annotations:
#        description: "The 99th percentile of PostgreSQL request latency is above the threshold for pod: {{ $labels.pod }}"
#        summary: "High PostgreSQL request latency for greptimedb pods"
#    - alert: CompactionFailures
#      expr: increase(greptime_mito_compaction_failure_total[1h]) > 2
#      for: 10m
#      labels:
#        severity: warning
#      annotations:
#        summary: "GreptimeDB compaction failures"
#        description: "GreptimeDB compaction failures have increased by more than {{ $value }} in the last hour"

# -- Configure to object storage
objectStorage:
#  credentials:
#    secretName: ""

#    # AWS or AliCloud cloudProvider accessKeyID
#    accessKeyId: "you-should-set-the-access-key-id-here"

#    # AWS cloudProvider secretAccessKey
#    secretAccessKey: "you-should-set-the-secret-access-key-here"

#    # AliCloud cloudProvider secretAccessKey
#    accessKeySecret: "you-should-set-the-access-key-secret-here"

#    # Azure cloudProvider accountName and accountKey
#    accountName: "you-should-set-the-account-name-here"
#    accountKey: "you-should-set-the-account-key-here"

#    # GCP cloudProvider serviceAccountKey JSON-formatted base64 value
#    serviceAccountKey: "you-should-set-the-base64-service-account-key-here"

#    # Set the existing secret to get the key's of cloudProvider
#    existingSecretName: ""

  # Configure to use s3 storage.
  s3: {}
#    bucket: "bucket-name"
#    region: "us-west-2"

#    # The data directory in S3 will be: 's3://<bucket>/<root>/data/...'.
#    root: "mycluster"
#    endpoint: "s3.us-west-2.amazonaws.com"   # See more detail: https://docs.aws.amazon.com/general/latest/gr/s3.html

  # Configure to use oss storage.
  oss: {}
#    bucket: "bucket-name"
#    region: "cn-hangzhou"

#    # The data directory in OSS will be: 'oss://<bucket>/<root>/data/...'.
#    root: "mycluster"
#    endpoint: "oss-cn-hangzhou.aliyuncs.com"

  # Configure to use gcs storage
  gcs: {}
  #  bucket: "bucket-name"
  #  scope: "" # example: "https://www.googleapis.com/auth/devstorage.read_write"

  #  # The data directory in gcs will be: 'gcs://<bucket>/<root>/data/...'.
  #  root: "mycluster"
  #  endpoint: "https://storage.googleapis.com"

  # Configure to use azblob storage
  azblob: {}
  #  container: ""
  #  endpoint: ""
  #  root: "mycluster"

  # Configure to object storage cache.
  cache: {}
  #  cacheCapacity: "10GiB"

# -- Configure to remote wal
remoteWal:
  # -- Enable remote wal
  enabled: false
  # -- The remote wal type, only support kafka now.
  kafka:
    # -- The kafka broker endpoints
    brokerEndpoints: []

# -- Configure to dedicated wal
dedicatedWAL:
  # -- Enable dedicated wal
  enabled: false
  # -- Configure to raft engine
  raftEngine:
    # -- Configure to fs
    fs:
      # -- The storage class name
      storageClassName: null
      # -- The name of the wal
      name: wal
      # -- The storage size
      storageSize: 20Gi
      # -- The mount path
      mountPath: /wal

# -- Configure to frontend ingress
ingress: {}
 # -- Ingress annotations to apply to the ingress resource
 # annotations: {}
 #   example: frontend-ingress

 # -- Labels to apply to the ingress resource
 # labels: {}
 #   example: frontend-ingress

 # -- Specify the IngressClassName to use for the ingress
 # ingressClassName: nginx

 # -- The rules for routing traffic to the frontend service
 # rules:
 #   - host: ingress.example.com
 #     backends:
 #       - path: /
 #         pathType: Prefix  # Support to 'Prefix', 'ImplementationSpecific', 'Exact'.

 #       - name: read        # Specify the read frontend name if it exists.
 #         path: /
 #         pathType: Prefix
 #       - name: write       # Specify the write frontend name if it exists.
 #         path: /v1/sql
 #         pathType: Prefix

 # -- TLS configuration for securing the ingress traffic
 # tls:
 #   - secretName: frontend-ingress-tls
 #     hosts:
 #       - ingress.example.com

# -- The static auth for greptimedb, only support one user now(https://docs.greptime.com/user-guide/deployments/authentication/static).
auth:
  # -- Enable static auth
  enabled: false
  # -- The auth file path to store the auth info
  mountPath: "/etc/greptimedb/auth"
  # -- The auth file name, the full path is `${mountPath}/${fileName}`
  fileName: "passwd"
  # -- The users to be created in the auth file
  users:
    - username: "admin"
      password: "admin"

debugPod:
  # -- Enable debug pod, for more information see: "../../docker/debug-pod/README.md".
  enabled: false

  # -- The debug pod image
  image:
    registry: docker.io
    repository: greptime/greptime-tool
    tag: "20250317-5281e66"

  # -- The debug pod resource
  resources:
    requests:
      memory: 64Mi
      cpu: 50m
    limits:
      memory: 256Mi
      cpu: 200m

# -- The monitoring bootstrap configuration
monitoring:
  # -- Enable monitoring
  enabled: false

  # -- Configure the standalone instance for storing monitoring data
  standalone: {}
#     base:
#      main:
#        # -- The standalone image, if not set, it will use the cluster image.
#        image: ""

#        resources:
#          # -- The requested resources for monitoring
#          requests: {}
# #            cpu: 500m
# #            memory: 512Mi

#          # -- The resources limits for monitoring
#          limits: {}
# #            cpu: "1"
# #            memory: "1Gi"

#        # -- The environment variables for the container
#        env: []

#        # -- The command to be executed in the container
#        command: []

#        # -- The arguments to be passed to the command
#        args: []

#      # -- The annotations to be created to the pod for monitoring
#      annotations: {}

#      # -- The labels to be created to the pod for monitoring
#      labels: {}

#      # -- The pod node selector for monitoring
#      nodeSelector: {}

#      # -- The pod tolerations for monitoring
#      tolerations: []

#      # -- The pod affinity for monitoring
#      affinity: {}

#      # -- The global service account for monitoring
#      serviceAccountName: ""
#     datanodeStorage:
#       fs:
#         # -- Storage class for datanode persistent volume
#         storageClassName: null
#         # -- Storage size for datanode persistent volume
#         storageSize: 50Gi
#         # -- Storage retain policy for datanode persistent volume
#         storageRetainPolicy: Retain
#         # -- The dataHome directory, default is "/data/greptimedb/"
#         dataHome: "/data/greptimedb"
#         # -- The data directory of the storage, default is "/data/greptimedb"
#         mountPath: "/data/greptimedb"
#         # -- The labels for the PVC that will be created
#         labels: {}
#         # -- The annotations for the PVC that will be created
#         annotations: {}

  # -- Configure the logs collection
  logsCollection:
    # -- The greptimedb pipeline for logs collection
    pipeline:
      data: ""

  # -- Configure vector for logs and metrics collection.
  vector:
    # -- vector image registry
    registry: docker.io
    # -- vector image repository
    repository: timberio/vector
    # -- vector image tag
    tag: 0.46.1-debian

    # -- vector resource
    resources:
      requests:
        cpu: "500m"
        memory: "256Mi"
      limits:
        cpu: "500m"
        memory: "256Mi"

# -- Global logging configuration
logging:
  # -- The log level for greptimedb, only support "debug", "info", "warn", "debug"
  level: "info"

  # -- The log format for greptimedb, only support "json" and "text"
  format: "text"

  # -- The logs directory for greptimedb
  logsDir: "/data/greptimedb/logs"

  # -- Whether to log to stdout only
  onlyLogToStdout: false

  # -- indicates whether to persist the log with the datanode data storage. It **ONLY** works for the datanode component.
  persistentWithData: false

  # -- The log filters, use the syntax of `target[span\{field=value\}]=level` to filter the logs.
  filters: []

  # -- The slow query log configuration.
  slowQuery:
    # -- Enable slow query log.
    enabled: false

    # -- The threshold of slow query log in seconds.
    threshold: "10s"

    # -- Sample ratio of slow query log.
    sampleRatio: "1.0"

# -- Deploy grafana dashboards for the grafana dashboard sidecar. https://github.com/grafana/helm-charts/tree/main/charts/grafana#sidecar-for-dashboards
dashboards:
  # -- Enable the grafana dashboards sidecar.
  enabled: false
  # -- The namespace in which the grafana dashboard configmaps are installed
  namespace: ""
  # -- The label as defined in the grafana helmchart. https://github.com/grafana/helm-charts/tree/main/charts/grafana#sidecar-for-dashboards
  label: grafana_dashboard
  # -- The label value as defined in the grafana helmchart. https://github.com/grafana/helm-charts/tree/main/charts/grafana#sidecar-for-dashboards
  labelValue: "1"
  # -- Additional annotation for the configmap
  annotations: {}
  # -- Extra labels for the configmap
  extraLabels: {}

# -- Deploy grafana for monitoring.
grafana:
  # -- Enable grafana deployment. It needs to enable monitoring `monitoring.enabled: true` first.
  enabled: false

  # -- The default admin username for grafana.
  adminUser: admin

  # -- The default admin password for grafana.
  adminPassword: gt-operator

  # -- The grafana image.
  image:
    # -- The grafana image registry.
    registry: docker.io
    # -- The grafana image repository.
    repository: grafana/grafana
    # -- The grafana image tag.
    tag: 11.6.0

  # -- The grafana sidecar settings to import dashboards
  sidecar:
    dashboards:
      enabled: true
      searchNamespace: ALL
      provider:
        allowUiUpdates: true

  # -- The grafana datasources.
  datasources:
    datasources.yaml:
      datasources:
        # Query the cluster metrics.
        - name: metrics
          type: prometheus
          url: http://mycluster-monitor-standalone.default.svc.cluster.local:4000/v1/prometheus
          access: proxy
          isDefault: true

        # Query the cluster logs and slow queries.
        - name: logs
          type: mysql
          url: mycluster-monitor-standalone.default.svc.cluster.local:4002
          access: proxy
          database: public

        # Query the information schema from the cluster.
        - name: information_schema
          type: mysql
          url: mycluster-frontend.default.svc.cluster.local:4002
          access: proxy
          database: information_schema

  # -- Init chown data for grafana.
  initChownData:
    # -- Enable init chown data for grafana.
    enabled: false

  # -- The grafana persistence configuration.
  persistence:
    # -- Whether to enable the persistence for grafana.
    enabled: true
    # -- The access modes for the grafana persistence.
    accessModes:
      - ReadWriteOnce
    # -- The storage size for the grafana persistence.
    size: 10Gi
    # -- The storageClassName for the grafana persistence.
    storageClassName: null

  # -- The grafana service configuration.
  service:
    # -- Whether to create the service for grafana.
    enabled: true
    # -- The type of the service.
    type: ClusterIP
    # -- The annotations for the grafana service.
    annotations: {}

# -- Deploy jaeger-all-in-one for development purpose.
jaeger-all-in-one:
  # -- Enable jaeger-all-in-one deployment.
  enabled: false

  # -- The jaeger-all-in-one image configuration.
  image:
    # -- The jaeger-all-in-one image repository.
    repository: jaegertracing/all-in-one
    # -- The jaeger-all-in-one image pull policy.
    pullPolicy: IfNotPresent
    # -- The jaeger-all-in-one image tag.
    versionOverride: latest

  # -- The jaeger-all-in-one service configuration.
  service:
    # -- The type of the service.
    type: ClusterIP
    # -- The service port.
    port: 16686
    # -- The annotations for the service.
    annotations: {}

  # -- The jaeger-all-in-one persistence configuration.
  volume:
    # -- Whether to enable the persistence for jaeger-all-in-one.
    enabled: true
    # -- The storageclass for the jaeger-all-in-one.
    className: ""
    # -- The storage size for the jaeger-all-in-one.
    size: 3Gi

  # -- Enable the zipkin collector for jaeger-all-in-one and listen on port 9411.
  enableHttpZipkinCollector: true

  # -- Enable the opentelemetry collector for jaeger-all-in-one and listen on port 4317.
  enableHttpOpenTelemetryCollector: true

  # -- The resources configurations for the jaeger-all-in-one.
  resources: {}
#    limits:
#     cpu: 100m
#     memory: 128Mi
#    requests:
#     cpu: 100m
#     memory: 128Mi
