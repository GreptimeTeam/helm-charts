# Default values for greptimedb operator

image:
  # -- The image registry
  registry: docker.io
  # -- The image repository
  repository: greptime/greptimedb-operator
  # -- The image pull policy for the controller
  imagePullPolicy: IfNotPresent
  # -- The image tag
  tag: v0.5.4
  # -- The image pull secrets
  pullSecrets: []

# -- String to partially override release template name
nameOverride: ""

# -- Provide a name to substitute for the full names of resources
fullnameOverride: ""

# -- additional labels to add to all resources
additionalLabels: {}

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

## Custom resource configuration
crds:
  # -- Install and upgrade CRDs
  install: true
  # -- Keep CRDs on chart uninstall
  keep: true
  # -- Annotations to be added to all CRDs
  annotations: {}
  # -- Addtional labels to be added to all CRDs
  additionalLabels: {}

# -- Number of replicas for the greptimedb operator
replicas: 1

# -- The deployment annotations
annotations: {}

# -- [Environment variables](https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/) for the container.
env: []

# -- Environment variables from secrets or configmaps to add to the container.
envFrom: []

# -- Extra pod annotations to add
podAnnotations: {}

# -- Extra pod labels to add
podLabels: {}

# -- Default resources for greptimedb operator
resources: {}
#  limits:
#    cpu: 500m
#    memory: 512Mi
#  requests:
#    cpu: 250m
#    memory: 256Mi

rbac:
  # -- Install role based access control
  create: true

# -- The operator node selector
nodeSelector: {}

# -- The pod tolerations
tolerations: []

# -- The pod affinity
affinity: {}

# -- Configure options for liveness probe
livenessProbe:
  enabled: true
  initialDelaySeconds: 15
  periodSeconds: 30
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 5

# -- Configure options for readiness probe
readinessProbe:
  enabled: true
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 5

# -- Configure options for startup probe
startupProbe:
  enabled: true
  initialDelaySeconds: 0
  periodSeconds: 10
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 30

# -- Enable leader election for greptimedb operator.
leaderElection:
  enabled: true
  # -- LeaseDuration is the duration that non-leader candidates will wait to force acquire leadership.
  leaseDuration: 15s

  # -- RenewDeadline is the duration that the acting controlplane will retry refreshing leadership before giving up.
  renewDeadline: 10s

  # -- RetryPeriod is the duration the LeaderElector clients should wait between tries of actions.
  retryPeriod: 2s

# -- The ExtraArgs specifies additional command-line arguments for the container entrypoint
extraArgs: []
#  - --v=2

# -- Volume mounts to add to the pod
VolumeMounts: []
#  - name: webhook-tls
#    mountPath: /etc/webhook-tls
#    readOnly: true

# -- Volumes to add to the pod
Volumes: []
#  - name: webhook-tls
#    secret:
#      secretName: webhook-server-tls

# -- The configuration for the admission webhook
admissionWebhook:
  # -- Whether to enable the admission webhook
  enabled: false

  # -- The port for the admission webhook
  port: 8082

  # -- The directory that contains the certificate
  certDir: "/etc/webhook-tls"

  # -- Additional annotations to the admission webhooks
  annotations: {}

  # -- Valid values: Fail, Ignore, IgnoreOnInstallOnly
  failurePolicy: Fail

  # -- A PEM encoded CA bundle which will be used to validate the webhook's server certificate.
  # If certManager.enabled is true, you can get it like this: kubectl get secret webhook-server-tls -n ${namespace} -o jsonpath='{.data.ca\.crt}'
  caBundle: ""

  # -- Use certmanager to generate webhook certs
  certManager:
    enabled: false

    # -- self-signed root certificate
    rootCert:
      # default to be 5 year
      duration: ""  # 43800h0m0s

    # -- self-signed webhook certificate
    admissionCert:
      # default to be 1 year
      duration: ""  # 8760h0m0s
